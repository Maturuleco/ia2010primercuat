import java.io.BufferedWriter;
import java.io.File;
import java.io.FileWriter;
import java.io.FilenameFilter;
import java.io.IOException;
import java.util.LinkedList;
import java.util.List;

public class Main {

	public static void main(String[] args) throws Exception {
		
		String path = "C:\\Documents and Settings\\csanchez\\Desktop\\Dtodo\\mio\\ia\\";
		File commentfolder = new File(path + "comments\\");
		File[] commentFiles = commentfolder.listFiles(new FileListFilter("yaml"));
		
		File dataSetResult = new File(path + "/comments.csv");
		if (commentFiles == null) {
			throw new Exception("No se pudo encontrar el path: " + path);
		}
		
		System.out.println(" ~ INICIO Procesamiento de comentarios ~" );
		
		FileWriter fstream;
		BufferedWriter out;
		try {
			fstream = new FileWriter(dataSetResult);
			out = new BufferedWriter(fstream);
			List<Comment> restoComments = new LinkedList<Comment>();
			
			for (int j = 0; j < commentFiles.length; j++) {
				File restoComment = commentFiles[j];
				System.out.print("por procesar "+ j +": " + restoComment.getName() +"\n");
	    		
				restoComments.addAll(ParserComments.generateComment(restoComment));
			}
			out.close();
		} catch (IOException e) {
			e.printStackTrace();
		}
		System.out.println(" ~ FIN Procesamiento de comentarios ~" );
	}
	
	static class FileListFilter implements FilenameFilter {
		private String extension; 

		public FileListFilter(String extension) {
		  this.extension = extension;
		}
		
		public boolean accept(File directory, String filename) {
		  boolean fileOK = true;
		  if (extension != null) {
		    fileOK &= filename.endsWith('.' + extension);
		  }
		  return fileOK;
		}
	}

}
